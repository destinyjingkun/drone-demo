kind: pipeline
type: docker
name: backend

steps:
- name: build
  image: golang:1.12
  commands:
  - go build
  when:
    branch: [master]

---
kind: pipeline
type: exec
name: frontend

steps:
- name: build
  image: golang:1.12
  commands:
  - go build
- name: docker_gen
  image: docker
  commands:
  - docker build -t drone-demo .
  volumes: 
  - /var/run/docker.sock: /var/run/docker.sock